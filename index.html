<html>
    <meta charset="UTF-8"> 
    <body>
        <script src="fluid.js"> </script>
        <script> 
            // Set the canvas up in the document
            var canvas = document.createElement("canvas");
            var length = 125;
            canvas.width = length;
            canvas.height = length;
            document.body.appendChild(canvas);

            // Create the fluid
            var f = new fluid(length, length, canvas);
            canvas.addEventListener('mousemove', function(e) {
                var rect = canvas.getBoundingClientRect();
                f.updateMouse((e.clientX - rect.left) | 0, (e.clientY - rect.top) | 0);
            });
            canvas.addEventListener('mousedown', function(e) {
                f.mouseDown = true;
            });
            canvas.addEventListener('mouseup', function(e) {
                f.mouseDown = false;
            });

            // Stolen animation code (what is javascript?)
            var requestAnimationFrame = (window.requestAnimationFrame       ||
                                         window.webkitRequestAnimationFrame ||
                                         window.mozRequestAnimationFrame    ||
                                         window.oRequestAnimationFrame      ||
                                         window.msRequestAnimationFrame     ||
                                         function(callback){
                                             window.setTimeout(callback, 1000 / 60);
                                         });

            f.render();
            (function animate() {
                f.step();
                f.render();
                requestAnimationFrame(animate);
            })();
        </script>
    </body>
</html>
